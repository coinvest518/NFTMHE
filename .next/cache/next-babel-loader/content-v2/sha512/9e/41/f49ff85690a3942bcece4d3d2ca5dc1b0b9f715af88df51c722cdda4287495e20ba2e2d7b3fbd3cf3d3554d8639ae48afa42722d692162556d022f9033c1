{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState } from 'react';\nimport Link from 'next/link';\nimport style from './Profile.module.scss';\nimport Footer from 'components/base/Footer';\nimport FloatingHeader from 'components/base/FloatingHeader';\nimport NFTCard from 'components/base/NftCard';\nimport Creator from 'components/base/Creator';\nimport Sidebar from './Sidebar';\nimport FloatingMenu from './FloatingMenu';\nimport Edit from './Edit';\nimport Switch from 'react-switch';\nimport { follow, unfollow } from 'actions/follower';\n\nconst Profile = ({\n  user,\n  setUser,\n  ownedNFTS,\n  createdNFTS,\n  likedNfts,\n  setLikedNfts,\n  followers,\n  followed,\n  setFollowers,\n  setFollowed,\n  setModalExpand,\n  setNotAvailable,\n  setSuccessPopup\n}) => {\n  var _user$banner;\n\n  const {\n    0: isFiltered,\n    1: setIsFiltered\n  } = useState(false);\n  const {\n    0: scope,\n    1: setScope\n  } = useState('My NFTs');\n  const {\n    0: expand,\n    1: setExpand\n  } = useState(false);\n  const {\n    0: banner,\n    1: setBanner\n  } = useState((_user$banner = user.banner) !== null && _user$banner !== void 0 ? _user$banner : 'https://images.unsplash.com/photo-1579546929518-9e396f3cc809?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=2250&q=80');\n  const listedOwnedNFTS = ownedNFTS.filter(x => x.listed === 1);\n  const unlistedOwnedNFTS = ownedNFTS.filter(x => x.listed === 0);\n  const {\n    1: setSearchValue\n  } = useState('');\n\n  const updateKeywordSearch = event => {\n    setSearchValue(event.currentTarget.value);\n  };\n\n  const handleFollow = async (profileWalletId, isUnfollow = false) => {\n    try {\n      let res = !isUnfollow ? await follow(profileWalletId, user.walletId) : await unfollow(profileWalletId, user.walletId);\n\n      if (res) {\n        setFollowers(followers.findIndex(x => x.walletId === res.walletId) !== -1 ? followers.map(x => x.walletId === res.walletId ? res : x) : [...followers, res]);\n\n        if (isUnfollow) {\n          setFollowed(followed.filter(x => x.walletId !== res.walletId));\n        } else {\n          setFollowed(followed.findIndex(x => x.walletId === res.walletId) !== -1 ? followed.map(x => x.walletId === res.walletId ? res : x) : [...followed, res]);\n        }\n      }\n    } catch (err) {\n      console.error(err);\n    }\n  };\n\n  function returnTitle() {\n    return scope;\n  }\n\n  function returnNFTs() {\n    let displayNFTs = [];\n\n    switch (scope) {\n      case 'My NFTs':\n        displayNFTs = ownedNFTS;\n        break;\n\n      case 'My creations':\n        displayNFTs = createdNFTS;\n        break;\n\n      case 'Liked':\n        displayNFTs = likedNfts;\n        break;\n\n      case 'My NFTs on sale':\n        displayNFTs = listedOwnedNFTS;\n        break;\n\n      case 'My NFTs not for sale':\n        displayNFTs = unlistedOwnedNFTS;\n        break;\n\n      default:\n        displayNFTs = ownedNFTS;\n        break;\n    }\n\n    return displayNFTs.map(item => /*#__PURE__*/_jsx(\"div\", {\n      className: style.NFTShell,\n      children: /*#__PURE__*/_jsx(NFTCard, {\n        mode: \"grid\",\n        item: item,\n        user: user,\n        setUser: setUser,\n        likedNfts: likedNfts,\n        setLikedNfts: setLikedNfts\n      })\n    }, item.id));\n  }\n\n  function returnCategory() {\n    if (scope === 'Followed' || scope === 'Followers') {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: style.NFTs,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: style.Top,\n          children: [/*#__PURE__*/_jsx(\"h3\", {\n            className: style.NFTTitle,\n            children: returnTitle()\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: style.SearchContainer,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: style.SearchBar,\n              children: /*#__PURE__*/_jsx(\"input\", {\n                type: \"search\",\n                onChange: updateKeywordSearch,\n                className: style.Input,\n                placeholder: \"Search\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: style.Toggle,\n              children: [/*#__PURE__*/_jsx(\"label\", {\n                children: /*#__PURE__*/_jsx(Switch, {\n                  checked: isFiltered,\n                  onChange: () => setIsFiltered(!isFiltered),\n                  offColor: \"#000000\",\n                  onColor: \"#7417ea\",\n                  uncheckedIcon: false,\n                  checkedIcon: false,\n                  width: 46,\n                  handleDiameter: 23,\n                  className: style.SwitchShell\n                })\n              }), /*#__PURE__*/_jsx(\"span\", {\n                className: style.Label,\n                children: \"Certified only\"\n              })]\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: style.FollowsContainer,\n          children: returnFollowers()\n        })]\n      });\n    }\n\n    if (scope === 'edit') {\n      return /*#__PURE__*/_jsx(Edit, {\n        user: user,\n        setBanner: setBanner,\n        setSuccessPopup: setSuccessPopup\n      });\n    } else {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: style.NFTs,\n        children: [/*#__PURE__*/_jsx(\"h3\", {\n          className: style.NFTTitle,\n          children: returnTitle()\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: style.NFTsContainer,\n          children: returnNFTs()\n        })]\n      });\n    }\n  }\n\n  function returnFollowers() {\n    let creators = scope === \"Followers\" ? followers : followed;\n    creators = !isFiltered ? creators : creators.filter(x => x.verified);\n    return creators.map(item => {\n      const followBack = scope === \"Followers\" && followed.findIndex(x => x.walletId === item.walletId) !== -1 ? true : false;\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: style.CreatorShell,\n        children: [/*#__PURE__*/_jsx(Link, {\n          href: `/${item.name}`,\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: /*#__PURE__*/_jsx(Creator, {\n              user: item,\n              size: \"small\",\n              showTooltip: false\n            })\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: style.CreatorInfos,\n          children: [/*#__PURE__*/_jsx(Link, {\n            href: `/${item.name}`,\n            children: /*#__PURE__*/_jsx(\"a\", {\n              children: /*#__PURE__*/_jsx(\"h2\", {\n                className: style.CreatorName,\n                children: item.name\n              })\n            })\n          }), /*#__PURE__*/_jsxs(\"span\", {\n            className: style.CreatorFollowers,\n            children: [item.nbFollowers, \" followers\"]\n          }), scope === 'Followers' ? /*#__PURE__*/_jsx(\"div\", {\n            onClick: () => handleFollow(item.walletId, followBack),\n            className: style.Unfollow,\n            children: followBack ? \"Unfollow\" : \"Follow\"\n          }) : /*#__PURE__*/_jsx(\"div\", {\n            onClick: () => handleFollow(item.walletId, true),\n            className: style.Unfollow,\n            children: \"Unfollow\"\n          })]\n        })]\n      }, item._id);\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: style.Container,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: style.Banner,\n      children: /*#__PURE__*/_jsx(\"img\", {\n        className: style.BannerIMG,\n        src: banner,\n        draggable: \"false\",\n        alt: \"banner\"\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: style.Wrapper,\n      children: [/*#__PURE__*/_jsx(Sidebar, {\n        user: user,\n        scope: scope,\n        setScope: setScope,\n        setExpand: setExpand,\n        ownedAmount: ownedNFTS.length,\n        createdAmount: createdNFTS.length,\n        likedAmount: likedNfts.length,\n        listedOwnedAmount: listedOwnedNFTS.length,\n        unlistedOwnedAmount: unlistedOwnedNFTS.length,\n        followersAmount: followers.length,\n        followedAmount: followed.length\n      }), returnCategory()]\n    }), /*#__PURE__*/_jsx(FloatingHeader, {\n      user: user,\n      setModalExpand: setModalExpand\n    }), /*#__PURE__*/_jsx(Footer, {\n      setNotAvailable: setNotAvailable\n    }), expand && /*#__PURE__*/_jsx(FloatingMenu, {\n      setScope: setScope,\n      scope: scope,\n      setExpand: setExpand,\n      ownedAmount: ownedNFTS.length,\n      createdAmount: createdNFTS.length,\n      likedAmount: likedNfts.length,\n      listedOwnedAmount: listedOwnedNFTS.length,\n      unlistedOwnedAmount: unlistedOwnedNFTS.length,\n      followersAmount: followers.length,\n      followedAmount: followed.length\n    })]\n  });\n};\n\nexport default Profile;","map":null,"metadata":{},"sourceType":"module"}