{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"C:/Users/mildh/Desktop/nft/node_modules/@babel/runtime/regenerator\";\nimport _toConsumableArray from \"C:/Users/mildh/Desktop/nft/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _asyncToGenerator from \"C:/Users/mildh/Desktop/nft/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useState } from 'react';\nimport Link from 'next/link';\nimport style from './Profile.module.scss';\nimport Footer from 'components/base/Footer';\nimport FloatingHeader from 'components/base/FloatingHeader';\nimport NFTCard from 'components/base/NftCard';\nimport Creator from 'components/base/Creator';\nimport Sidebar from './Sidebar';\nimport FloatingMenu from './FloatingMenu';\nimport Edit from './Edit';\nimport Switch from 'react-switch';\nimport { follow, unfollow } from 'actions/follower';\n\nvar Profile = function Profile(_ref) {\n  var _user$banner;\n\n  var user = _ref.user,\n      setUser = _ref.setUser,\n      ownedNFTS = _ref.ownedNFTS,\n      createdNFTS = _ref.createdNFTS,\n      likedNfts = _ref.likedNfts,\n      setLikedNfts = _ref.setLikedNfts,\n      followers = _ref.followers,\n      followed = _ref.followed,\n      setFollowers = _ref.setFollowers,\n      setFollowed = _ref.setFollowed,\n      setModalExpand = _ref.setModalExpand,\n      setNotAvailable = _ref.setNotAvailable,\n      setSuccessPopup = _ref.setSuccessPopup;\n\n  var _useState = useState(false),\n      isFiltered = _useState[0],\n      setIsFiltered = _useState[1];\n\n  var _useState2 = useState('My NFTs'),\n      scope = _useState2[0],\n      setScope = _useState2[1];\n\n  var _useState3 = useState(false),\n      expand = _useState3[0],\n      setExpand = _useState3[1];\n\n  var _useState4 = useState((_user$banner = user.banner) !== null && _user$banner !== void 0 ? _user$banner : 'https://images.unsplash.com/photo-1579546929518-9e396f3cc809?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=2250&q=80'),\n      banner = _useState4[0],\n      setBanner = _useState4[1];\n\n  var listedOwnedNFTS = ownedNFTS.filter(function (x) {\n    return x.listed === 1;\n  });\n  var unlistedOwnedNFTS = ownedNFTS.filter(function (x) {\n    return x.listed === 0;\n  });\n\n  var _useState5 = useState(''),\n      setSearchValue = _useState5[1];\n\n  var updateKeywordSearch = function updateKeywordSearch(event) {\n    setSearchValue(event.currentTarget.value);\n  };\n\n  var handleFollow = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(profileWalletId) {\n      var isUnfollow,\n          res,\n          _args = arguments;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              isUnfollow = _args.length > 1 && _args[1] !== undefined ? _args[1] : false;\n              _context.prev = 1;\n\n              if (isUnfollow) {\n                _context.next = 8;\n                break;\n              }\n\n              _context.next = 5;\n              return follow(profileWalletId, user.walletId);\n\n            case 5:\n              _context.t0 = _context.sent;\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.next = 10;\n              return unfollow(profileWalletId, user.walletId);\n\n            case 10:\n              _context.t0 = _context.sent;\n\n            case 11:\n              res = _context.t0;\n\n              if (res) {\n                setFollowers(followers.findIndex(function (x) {\n                  return x.walletId === res.walletId;\n                }) !== -1 ? followers.map(function (x) {\n                  return x.walletId === res.walletId ? res : x;\n                }) : [].concat(_toConsumableArray(followers), [res]));\n\n                if (isUnfollow) {\n                  setFollowed(followed.filter(function (x) {\n                    return x.walletId !== res.walletId;\n                  }));\n                } else {\n                  setFollowed(followed.findIndex(function (x) {\n                    return x.walletId === res.walletId;\n                  }) !== -1 ? followed.map(function (x) {\n                    return x.walletId === res.walletId ? res : x;\n                  }) : [].concat(_toConsumableArray(followed), [res]));\n                }\n              }\n\n              _context.next = 18;\n              break;\n\n            case 15:\n              _context.prev = 15;\n              _context.t1 = _context[\"catch\"](1);\n              console.error(_context.t1);\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 15]]);\n    }));\n\n    return function handleFollow(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  function returnTitle() {\n    return scope;\n  }\n\n  function returnNFTs() {\n    var displayNFTs = [];\n\n    switch (scope) {\n      case 'My NFTs':\n        displayNFTs = ownedNFTS;\n        break;\n\n      case 'My creations':\n        displayNFTs = createdNFTS;\n        break;\n\n      case 'Liked':\n        displayNFTs = likedNfts;\n        break;\n\n      case 'My NFTs on sale':\n        displayNFTs = listedOwnedNFTS;\n        break;\n\n      case 'My NFTs not for sale':\n        displayNFTs = unlistedOwnedNFTS;\n        break;\n\n      default:\n        displayNFTs = ownedNFTS;\n        break;\n    }\n\n    return displayNFTs.map(function (item) {\n      return /*#__PURE__*/_jsx(\"div\", {\n        className: style.NFTShell,\n        children: /*#__PURE__*/_jsx(NFTCard, {\n          mode: \"grid\",\n          item: item,\n          user: user,\n          setUser: setUser,\n          likedNfts: likedNfts,\n          setLikedNfts: setLikedNfts\n        })\n      }, item.id);\n    });\n  }\n\n  function returnCategory() {\n    if (scope === 'Followed' || scope === 'Followers') {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: style.NFTs,\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          className: style.Top,\n          children: [/*#__PURE__*/_jsx(\"h3\", {\n            className: style.NFTTitle,\n            children: returnTitle()\n          }), /*#__PURE__*/_jsxs(\"div\", {\n            className: style.SearchContainer,\n            children: [/*#__PURE__*/_jsx(\"div\", {\n              className: style.SearchBar,\n              children: /*#__PURE__*/_jsx(\"input\", {\n                type: \"search\",\n                onChange: updateKeywordSearch,\n                className: style.Input,\n                placeholder: \"Search\"\n              })\n            }), /*#__PURE__*/_jsxs(\"div\", {\n              className: style.Toggle,\n              children: [/*#__PURE__*/_jsx(\"label\", {\n                children: /*#__PURE__*/_jsx(Switch, {\n                  checked: isFiltered,\n                  onChange: function onChange() {\n                    return setIsFiltered(!isFiltered);\n                  },\n                  offColor: \"#000000\",\n                  onColor: \"#7417ea\",\n                  uncheckedIcon: false,\n                  checkedIcon: false,\n                  width: 46,\n                  handleDiameter: 23,\n                  className: style.SwitchShell\n                })\n              }), /*#__PURE__*/_jsx(\"span\", {\n                className: style.Label,\n                children: \"Certified only\"\n              })]\n            })]\n          })]\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: style.FollowsContainer,\n          children: returnFollowers()\n        })]\n      });\n    }\n\n    if (scope === 'edit') {\n      return /*#__PURE__*/_jsx(Edit, {\n        user: user,\n        setBanner: setBanner,\n        setSuccessPopup: setSuccessPopup\n      });\n    } else {\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: style.NFTs,\n        children: [/*#__PURE__*/_jsx(\"h3\", {\n          className: style.NFTTitle,\n          children: returnTitle()\n        }), /*#__PURE__*/_jsx(\"div\", {\n          className: style.NFTsContainer,\n          children: returnNFTs()\n        })]\n      });\n    }\n  }\n\n  function returnFollowers() {\n    var creators = scope === \"Followers\" ? followers : followed;\n    creators = !isFiltered ? creators : creators.filter(function (x) {\n      return x.verified;\n    });\n    return creators.map(function (item) {\n      var followBack = scope === \"Followers\" && followed.findIndex(function (x) {\n        return x.walletId === item.walletId;\n      }) !== -1 ? true : false;\n      return /*#__PURE__*/_jsxs(\"div\", {\n        className: style.CreatorShell,\n        children: [/*#__PURE__*/_jsx(Link, {\n          href: \"/\".concat(item.name),\n          children: /*#__PURE__*/_jsx(\"a\", {\n            children: /*#__PURE__*/_jsx(Creator, {\n              user: item,\n              size: \"small\",\n              showTooltip: false\n            })\n          })\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: style.CreatorInfos,\n          children: [/*#__PURE__*/_jsx(Link, {\n            href: \"/\".concat(item.name),\n            children: /*#__PURE__*/_jsx(\"a\", {\n              children: /*#__PURE__*/_jsx(\"h2\", {\n                className: style.CreatorName,\n                children: item.name\n              })\n            })\n          }), /*#__PURE__*/_jsxs(\"span\", {\n            className: style.CreatorFollowers,\n            children: [item.nbFollowers, \" followers\"]\n          }), scope === 'Followers' ? /*#__PURE__*/_jsx(\"div\", {\n            onClick: function onClick() {\n              return handleFollow(item.walletId, followBack);\n            },\n            className: style.Unfollow,\n            children: followBack ? \"Unfollow\" : \"Follow\"\n          }) : /*#__PURE__*/_jsx(\"div\", {\n            onClick: function onClick() {\n              return handleFollow(item.walletId, true);\n            },\n            className: style.Unfollow,\n            children: \"Unfollow\"\n          })]\n        })]\n      }, item._id);\n    });\n  }\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: style.Container,\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: style.Banner,\n      children: /*#__PURE__*/_jsx(\"img\", {\n        className: style.BannerIMG,\n        src: banner,\n        draggable: \"false\",\n        alt: \"banner\"\n      })\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: style.Wrapper,\n      children: [/*#__PURE__*/_jsx(Sidebar, {\n        user: user,\n        scope: scope,\n        setScope: setScope,\n        setExpand: setExpand,\n        ownedAmount: ownedNFTS.length,\n        createdAmount: createdNFTS.length,\n        likedAmount: likedNfts.length,\n        listedOwnedAmount: listedOwnedNFTS.length,\n        unlistedOwnedAmount: unlistedOwnedNFTS.length,\n        followersAmount: followers.length,\n        followedAmount: followed.length\n      }), returnCategory()]\n    }), /*#__PURE__*/_jsx(FloatingHeader, {\n      user: user,\n      setModalExpand: setModalExpand\n    }), /*#__PURE__*/_jsx(Footer, {\n      setNotAvailable: setNotAvailable\n    }), expand && /*#__PURE__*/_jsx(FloatingMenu, {\n      setScope: setScope,\n      scope: scope,\n      setExpand: setExpand,\n      ownedAmount: ownedNFTS.length,\n      createdAmount: createdNFTS.length,\n      likedAmount: likedNfts.length,\n      listedOwnedAmount: listedOwnedNFTS.length,\n      unlistedOwnedAmount: unlistedOwnedNFTS.length,\n      followersAmount: followers.length,\n      followedAmount: followed.length\n    })]\n  });\n};\n\nexport default Profile;","map":null,"metadata":{},"sourceType":"module"}